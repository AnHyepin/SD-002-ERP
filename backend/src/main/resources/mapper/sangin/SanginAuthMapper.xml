<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.backend.dao.SanginAuthDao">
    
    <!-- 로그인 -->
    <select id="login" parameterType="com.example.backend.dto.LoginRequest" resultType="map">
        SELECT *
        FROM tbl_user
        WHERE user_id = #{userId}
        AND password = #{password}
    </select>

    <!-- 회원가입 -->
    <insert id="register" parameterType="com.example.backend.dto.RegisterRequest">
        INSERT INTO tbl_user (
            password,
            username,
            name
            gender,
            birth_year,
            birth_month,
            birth_day,
            email,
            phone_number,
            agree_terms,
            created_at
        ) VALUES (
            #{password},
            #{username},
            #{name},
            #{gender},
            #{birthYear},
            #{birthMonth},
            #{birthDay},
            #{email},
            #{phoneNumber},
            #{agreeTerms},
            NOW()
        )
    </insert>

    <!-- 아이디 중복 확인 -->
    <select id="checkDuplicateId" parameterType="string" resultType="boolean">
        SELECT COUNT(*) > 0
        FROM tbl_user
        WHERE user_id = #{userId}
    </select>

    <!-- 이메일 중복 확인 -->
    <select id="checkDuplicateEmail" parameterType="string" resultType="boolean">
        SELECT COUNT(*) > 0
        FROM tbl_user
        WHERE email = #{email}
    </select>

    <!-- 전화번호 중복 확인 -->
    <select id="checkDuplicatePhone" parameterType="string" resultType="boolean">
        SELECT COUNT(*) > 0
        FROM tbl_user
        WHERE phone_number = #{phoneNumber}
    </select>

</mapper> 